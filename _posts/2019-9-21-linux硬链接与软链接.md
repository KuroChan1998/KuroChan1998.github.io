---
layout:     post
title:      linux硬链接和软链接
subtitle:   从刚结束的网易笔试题来的，总结下linux硬链接和软链接的联系和区别
date:       2019-09-21
author:     Kuro
header-img: img/home-bg-art.jpg
catalog: true
tags:
    - linux
    - 硬链接和软链接
    - 面试题


---

# Linux硬链接和软链接

## 硬链接

 	在Linux系统中，多个文件名指向同一索引节点(Inode)是正常且允许的。一般这种链接就称为硬链接。

​	硬链接的作用之一是**允许一个文件拥有多个有效路径名**，这样用户就可以建立硬链接到重要的文件，以防止“误删”源数据。

​	不过硬链接**只能在同一文件系统中的文件之间**进行链接，**不能对目录进行创建**。之所以文件建立了硬链接就会防止数据误删，是因为文件系统的原理是，只要文件的索引节点还有一个以上的链接（仅删除了该文件的指向），只删除其中一个链接并不影响索引节点本身和其他的链接（数据的实体并未删除），**只有当最后一个链接被删除后**，此时如果有新数据要存储到磁盘上，**被删除的文件的数据块及目录的链接才会被释放**，空间被新数据暂用覆盖。

## 软链接

​      软链接（也叫符号链接），类似于windows系统中的**快捷方式**，与硬链接不同，软链接就是一个普通文件，只是数据块内容有点特殊，文件用户数据块中存放的内容是另一文件的路径名的指向，通过这个方式可以快速定位到软连接所指向的源文件实体。

​	软链接**可对文件或目录创建**。

 	软链接作用：

- 便于文件的管理，比如把一个复杂路径下的文件链接到一个简单路径下方便用户访问。
- 节省空间解决空间不足问题，某个文件文件系统空间已经用完了，但是现在必须在该文件系统下创建一个新的目录并存储大量的文件，那么可以把另一个剩余空间较多的文件系统中的目录链接到该文件系统中。

​    删除软链接**并不影响被指向的文件**，但若**被指向的原文件被删除**，则相关软连接就**变成了死链接**。

## 总结

软链接：

- 软链接是存放另一个文件的路径的形式存在。
- 软链接**可以跨文件系统** ，硬链接不可以。
- 软链接可以**对一个不存在的文件名进行链接**，硬链接必须要有源文件。
- 软链接可以**对目录**进行链接。

硬链接：

- 硬链接，以文件副本的形式存在。但**不占用实际空间**。
- 不允许给目录创建硬链接。
- 硬链接只有在**同一个文件系统**中才能创建。
- 删除其中一个硬链接文件并不影响其他有相同 inode 号的文件。

## 附

linux系统可以用ln命令来创建链接文件。

ln命令格式： 

> ln [参数] [源文件或目录] [目标文件或目录]

主要参数：

- -i 交互模式，文件存在则提示用户是否覆盖。
- -s 软链接(符号链接)。
- -d 允许超级用户制作目录的硬链接。
- -b 删除，覆盖以前建立的链接

1.  软链接 （符号链接） ln -s   source  target 
2.  硬链接 （实体链接）ln       source  target

## 参考

[https://www.cnblogs.com/songgj/p/9115954.html](https://www.cnblogs.com/songgj/p/9115954.html)

